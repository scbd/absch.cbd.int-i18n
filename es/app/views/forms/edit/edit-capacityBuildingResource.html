<div ng-controller="editCapacityBuildingResource">

    <div ng-include="'/app/views/forms/edit/edit_header.html'"></div>

    <div style="padding: 24px;background-color:#FFF;border-bottom:2px solid #ccc;"><span block-region activate="isLoading()" ng-if="isLoading()"></span><div class="registerpage-content">

            <div class="alert alert-success alert-dismissable" ng-show="msg">
                <button aria-hidden="true" class="close" data-dismiss="alert" ng-click="msg=''" type="button">&times;</button><strong>{{msg}}</strong></div>

            <div class="alert alert-danger" ng-show="hasError()"><strong>Se produjo un error...</strong><div>{{error}}</div>
            </div>

            <div ng-show="isLoading()"><i class="fa fa-spinner fa-spin"></i> Cargando...</div>

            <div ng-show="!isLoading() && status!='hidden'">

                <div document="getCleanDocument()" hide-timer="false" languages="document.header.languages" workflow-std-buttons/>

                <div km-document-validation ng-model="validationReport"></div><!-- edit form --><form name="editForm" style="margin-top:10px">

                    <div ng-show="tab=='edit'" km-tab="edit">

    					<legend>Informaci&oacute;n general</legend>

    					<div class="row">
    						<div class="col-md-12">
    							<div class="km-control-group" required name="title" caption="T&iacute;tulo">
    								<div km-textbox-ml required ng-model="document.title" locales="document.header.languages"></div>
    							</div>
    						</div>
    					</div>

    					<div class="row">
    						<div class="col-md-12">
    							<div class="km-control-group" required name="resourceTypes" caption="Tipo de recurso">
    								<div km-select multiple name="resourceTypes" required ng-model="document.resourceTypes" items="options.resourceTypes()"></div>
    							</div>
    						</div>
    					</div>

    					<div class="row">
    						<div class="col-md-12">
    							<div class="km-control-group" required name="fileFormat" caption="Formato/Tipo de archivo">
    								<div km-select  name="fileFormat" required ng-model="document.fileFormat" items="options.fileFormats()"></div>
    							</div>
    						</div>
    					</div>


    					<div class="row">
    						<div class="col-md-12">
    							<div class="km-control-group" name="formatDetails" caption="Informaci&oacute;n acerca de los formatos">
    								<div km-textbox-ml rows="2" name="formatDetails" ng-model="document.formatDetails" locales="document.header.languages"></div>
    							</div>
    						</div>
    					</div>

    					<div class="row">
    						<div class="col-md-12">
    							<div class="km-control-group" name="purpose" caption="S&iacute;rvase indicar el prop&oacute;sito principal del recurso">
    								<div km-select multiple  name="purpose" ng-model="document.purpose" items="options.purposes()"></div>
    							</div>
    						</div>
    					</div>

    					<div class="row">
    						<div class="col-md-12">
    							<div class="km-control-group" required name="targetGroups" caption="Grupo(s) objeto/beneficiario(s)">
    								<div km-term-check name="targetGroups" required ng-model="document.targetGroups" terms="options.targetGroups()" binding-type="term[]"></div>
    							</div>
    						</div>
    					</div>

    					<div class="row">
    						<div class="col-md-12">
    							<div class="km-control-group" name="expertiseLevel" caption="Nivel del contenido o nivel de conocimientos/conocimientos especializados del p&uacute;blico destinatario del recurso">
    								<div km-select name="expertiseLevel" ng-model="document.expertiseLevel" items="options.expertiseLevels()"></div>
    							</div>
    						</div>
    					</div>

    					<div class="row">
    						<div class="col-md-12">
    							<div class="km-control-group" required name="authors" caption="Autor(es)">
    								<div class="help-info">Nombre de la persona autora de la publicaci&oacute;n o del recurso informativo.</div>
    								<div km-textbox-ml required ng-model="document.authors" rows="2" locales="document.header.languages"></div>
    							</div>
    						</div>
    					</div>

    					<div class="row">
    						<div class="col-md-12">
                                <div class="km-control-group" name="organizations" caption="Referencia a la(s) organizaci&oacute;n(ones) a cargo de la autor&iacute;a">
                                    
                                    <div document-selector ng-model="document.organizations"
                                                                        question="organizations"
                                                                        schema="contact"
                                                                        government="document.government"
                                                                        filter="true"
                                                                        ></div><!--<field-embed-contact multiple ng-model="document.organizations" locales="document.header.languages" caption="{{'Add an organization »'}}"></field-embed-contact>--></div><!-- <div class="km-control-group" name="organizations" caption="Reference to the authoring organisation(s)">
    								<div km-reference multiple name="organizations" ng-model="document.organizations" loader="loadRecords(identifier, 'organization')" order-by="sortContacts(reference)">
    										<div>
    											<div><strong>{{reference.title | lstring}}</strong></div>
    											<div>{{reference.summary | lstring}}</div>
    										</div>
    								</div>
    							</div> --></div>
    					</div>

    					<div class="row">
    						<div class="col-md-12">
    							<div class="km-control-group" required name="publicationYear" caption="A&ntilde;o de publicaci&oacute;n">
    								<input type="number" class="form-control" style="width:200px" required name="publicationYear" ng-model="document.publicationYear" />
    							</div>
    						</div>
    					</div>

    					<div class="row">
    						<div class="col-md-12">
    							<div class="km-control-group" name="rights" caption="Derechos">
    								<div class="help-info">Informaci&oacute;n sobre la propiedad de los derechos sobre el recurso, como, por ejemplo, el titular de los derechos de autor, y la disponibilidad para la reproducci&oacute;n con prop&oacute;sitos educativos o sin fines de lucro.</div>
    								<div km-textbox-ml name="rights" ng-model="document.rights" locales="document.header.languages"></div>
    							</div>
    						</div>
    					</div>

    					<div class="row">
    						<div class="col-md-12">
    							<div class="km-control-group" name="source" caption="Fuente">
    								<div class="help-info">Referencia a un recurso del cual se deriva el presente recurso (por ejemplo, un art&iacute;culo en una revista especializada) Para los documentos originales tal vez se desee especificar &quot;documento original&quot;.</div>
    								<div km-textbox-ml name="source" ng-model="document.source" locales="document.header.languages"></div>
    							</div>
    						</div>
    					</div>

    					<legend>Acceso a los recursos</legend>

    					<div class="row">
    						<div class="col-md-12">
    							<div class="km-control-group" required name="resourceLinks" caption="Enlace al/a los recurso(s)">
    								<div class="help-info">Por favor, siempre adjunte el/los documento(s) pertinente(s) que ser&aacute;n almacenados en la base de datos para que los usuarios puedan descargarlos. Cuando los recursos est&aacute;n disponibles en Internet, por favor, solo proporcione su enlace.</div>
    								<div km-link name="resourceLinks" required ng-model="document.resourceLinks" allow-link="true" allow-file="true" identifier="document.header.identifier"></div>
    							</div>
    						</div>
    					</div>

    					<div class="row">
    						<div class="col-md-12">
    							<div class="km-control-group" name="cover" caption="Imagen(es) de portada">
    								<div class="help-info">Solo se aceptan formatos JPEG y PNG.</div>
    								<div km-link name="cover" ng-model="document.covers" allow-link="false" allow-file="true" mime-types="image/jpeg;image/png" identifier="document.header.identifier"></div>
    							</div>
    						</div>
    					</div>

    					<legend>Informaci&oacute;n sobre el contenido del recurso</legend>

    					<div class="row">
    						<div class="col-md-12">
    							<div class="km-control-group" name="summary" caption="Resumen">
    								<div km-textbox-ml ng-model="document.summary"  rows="4" locales="document.header.languages"></div>
    							</div>
    						</div>
    					</div>

    					<div class="row">
    						<div class="col-md-12">
    							<div class="km-control-group" required name="regions" caption="Pa&iacute;s(es), grupo(s) regional(es) o econ&oacute;mico(s) relacionado(s) con el recurso">
    								<div km-select style="display: inline-block" name="regions" ng-model="document.regions" items="options.regions()" multiple placeholder="Selecciones un pa&iacute;s(es) y/o regi&oacute;n(es)"></div>
    							</div>
    						</div>
    					</div>

                        <legend>Temas</legend>

    					<div class="row">
    						<div class="col-md-12">
    							<div class="km-control-group" name="absKeyAreas" caption="&Aacute;reas clave y medidas estrat&eacute;gicas para la creaci&oacute;n y el desarrollo de capacidad ">
    								<div km-term-check name="absKeyAreas" ng-model="document.absKeyAreas" terms="options.absKeyAreas()" binding-type="term[]"></div>
    							</div>
    						</div>
    					</div><a translation-url  name="#AdditionalInformation"></a><legend>Informaci&oacute;n adicional</legend>

    					<div class="row">
    						<div class="col-md-12">
    							<div class="km-control-group" name="address" caption="Cualquier otra informaci&oacute;n pertinente">
    								<div class="help-info">Por favor, utilice este campo para proporcionar cualquier otra informaci&oacute;n pertinente que no se haya podido incluir en otro lugar del registro.</div>
    								<div km-textbox-ml ng-model="document.relevantInformation" rows="4" placeholder="" locales="document.header.languages"></div>
    							</div>
    						</div>
    					</div>

    					<div class="row">
    						<div class="col-md-12">
    							<div class="km-control-group" name="relevantDocuments" caption="Otros documentos relevantes">
    								<div km-link name="relevantDocuments" ng-model="document.relevantDocuments" allow-link="true" allow-file="true" identifier="document.header.identifier" ></div>
    							</div>
    						</div>
    					</div>

    					<div class="row">
    						<div class="col-md-12">
    							<div class="km-control-group" name="notes">
    								<legend>Notas</legend><span class="help-info">El campo &ldquo;Notas&rdquo; es para referencia personal y s&oacute;lo puede verse mientras se edita el registro.</span><div km-notes name="notes" ng-model="document.notes"></div>
    							</div>
    						</div>
    					</div>
    				</div>

				</form>

            	<div ng-show="tab=='review'" km-tab="review">

                    <div class="btn-group" ng-show="reviewDocument.header.languages.length>1">
                        <input class="btn" ng-class="{'active' : review.locale==locale, 'btn-info' : review.locale==locale}" ng-click="$parent.review.locale = locale" ng-repeat="locale in document.header.languages" type="button" value="{{locale | uppercase}}"/>
                    </div>
                    <div view-capacity-building-resource ng-model="reviewDocument" locale="review.locale" allow-drafts="true"></div>
                </div>

                <hr>

            </div>
        </div>
    </div>
</div>

</div>
</div>
