<div id="RegisterPage">
    <link href="/app/css/register.css" rel="stylesheet">
    <link href="/app/css/record.css" rel="stylesheet">
    <style>
        .popover {
            margin-top: 3px;
            background-color: #d9534f !important;
            border: 1px solid #ccc;
            border: 1px solid rgba(0, 0, 0, .2);
        }

        .popover.right>.arrow {
            border-right-color: #999;
            border-right-color: rgba(0, 0, 0, .25);
        }

        .popover.right>.arrow:after {
            border-right-color: #d9534f;
        }
        .cursor{
            cursor: pointer;
        }
        .overview>tbody>tr>td{
            padding:3px!important;
            border:0;
        }
        
    </style><span register-top-menu></span><div class="register-content card card-1-notrans">
        <div class="register-content-header bg-darkgrey color-white">
            <div style="padding:10px 10px;">
                <h3>Личный кабинет <span class="helpinfoInline"><i class="fa fa-info-circle helpicon pull-right" ng-click="showInfo = !showInfo"></i></span></h3><!--help info----------------------------><div ng-if="showInfo" class="well well-help">
                    <div ng-if="user.government">Зарегистрированные пользователи МП-ДГРСИВ могут найти в личном кабинете информацию о своей учетной записи механизма посредничества, своей роли и разрешениях в МП-ДГРСИВ. Здесь также можно обновить свой профиль или изменить свой пароль. На этой странице также приводится обзор всех записей, подготовленных зарегистрированными пользователями вашей страны, и их различного статуса: опубликованные документы, черновики, невыполненные запросы. Выберите желаемую категорию записей, чтобы получить более подробную информацию о ней или добавить новую запись. <br> <br> По запросу пользователей МП-ДГРСИВ им также предоставляется доступ к учебному сайту, с помощью которого они могут ознакомиться с функционированием МП-ДГРСИВ, не изменяя содержание записей, размещенных на официальном сайте МП-ДГРСИВ.</div>
                    <div ng-if="!user.government">Зарегистрированные пользователи МП-ДГРСИВ могут найти в личном кабинете информацию о своей учетной записи механизма посредничества, своей роли и разрешениях в МП-ДГРСИВ. Здесь также можно обновить свой профиль или изменить свой пароль. На этой странице также приводится обзор всех ваших записей и их различного статуса: опубликовано, черновики, невыполненные запросы. Выберите желаемую категорию записей, чтобы получить более подробную информацию о ней или добавить новую запись. По запросу пользователей МП-ДГРСИВ им также предоставляется доступ к учебному сайту, с помощью которого они могут ознакомиться с функционированием МП-ДГРСИВ не изменяя содержание записей, размещенных на официальном сайте МП-ДГРСИВ.</div>

                </div>

            </div>
        </div>
        <div class="register-content-content">
            <div class="row well" style="margin:0 0 30px 0">
                <h4 style="padding-bottom:3px;margin-top:0;border-bottom:1px solid #ddd;"><span class="hidden-xs">Welcome </span> <span class="color-black bold">{{user.name}} <span ng-if="roles.isAbsPublishingAuthority" style="font-weight: normal;"> (Publishing Authority)</span><span ng-if="roles.isAbsNationalAuthorizedUser" style="font-weight: normal;"> (Authorized User)</span></span> <span class="pull-right"> <span style="color:#999; cursor: pointer;" class="hidden-xs" ng-click="showProfileInfo=!showProfileInfo">view profile information </span><i class="pull-right fa fa-chevron-circle-down cursor" ng-show="!showProfileInfo" aria-hidden="true" ng-click="showProfileInfo=true"></i><i class="pull-right fa fa-chevron-circle-up cursor"   ng-show="showProfileInfo" aria-hidden="true" ng-click="showProfileInfo=false"></i></span></h4>
                <div class="row" ng-if="showProfileInfo">
                    <div class="col-md-6 cp-header">
                        <table>
                            <tr>
                                <td>
                                    <label>Name:</label>
                                </td>
                                <td><strong>{{user.name}}</strong></td>
                            </tr>
                            <tr>
                                <td>
                                    <label>Основной адрес электронной почты:</label>
                                </td>
                                <td><strong>{{user.email}}</strong></td>
                            </tr>
                            <tr>
                                <td>
                                    <label>Принадлежность к стране:</label>
                                </td>
                                <td ng-if="user.government"><a translation-url href="/countries/{{user.government | uppercase}}"><strong>{{userCountry|term}}</strong></a></td>
                                <td ng-if="!user.government"><strong>нет</strong></td>
                            </tr>
                        </table>
                    </div>
                    <div class="col-md-6 cp-header">
                        <table>
                            <td>
                                <label>Роль(-и):</label>
                            </td>
                            <td><span class="comma" ng-if="roles.isAbsNationalFocalPoint"><strong>ABS National Focal Point </strong><span class="helpinfoInline fa fa-info-circle" data-toggle="tooltip" data-html="true" data-title="Национальный координационный центр по ДГРСИВ отвечает за связь с Секретариатом, а также за назначение самого себя или другого пользователя в качестве публикующего органа (ПО) для МП-ДГРСИВ."
                                        data-container="body"></span></span> <span class="comma" ng-if="roles.isAbsPublishingAuthority"><strong>National Publishing Authority (PA)</strong><span class="helpinfoInline fa fa-info-circle " data-toggle="tooltip" data-html="true" data-title="Каждая страна может назначить только один ПО для МП-ДГРСИВ. Функции ПО включают обеспечение доступности размещаемой в МП-ДГРСИВ информации для широкой общественности посредством проверки и опубликования записей. ПО могут также назначать национальных зарегистрированных пользователей (НЗП), которым разрешается представлять черновики записей, имеющих отношение к их странам."
                                        data-container="body"></span></span> <span class="comma" ng-if="roles.isAbsNationalAuthorizedUser"><strong>National Authorized User (NAU)</strong><span class="helpinfoInline fa fa-info-circle" data-toggle="tooltip" data-html="true" data-title="Национальный координационный центр по ДГРСИВ отвечает за назначение самого себя или другого пользователя в качестве публикующего органа (ПО), а также за связь с Секретариатом."
                                        data-container="body"></span></span> <span class="comma" ng-if="roles.isUser"><strong>Registered User</strong><span class="helpinfoInline fa fa-info-circle" data-toggle="tooltip" data-html="true" data-title="Регулярные пользователи могут создавать черновики справочных записей и направлять СКБР запрос на их публикацию."
                                        data-container="body"></span></span> <span class="comma" ng-if="roles.isAbsAdministrator"><strong class="color-pink">ABSCH Admin</strong></span> <span class="comma" ng-if="roles.isAdministrator"><strong class="color-pink">Admin</strong></span></td>
                            </tr>
                            <tr>
                                <td>
                                    <label>Обновить профиль:</label>
                                </td>
                                <td><a translation-url href="https://accounts.cbd.int/profile" target="_new"><strong>accounts.cbd.int/profile</strong></a></td>
                            </tr>
                            <tr>
                                <td>
                                    <label>Обновить пароль:</label>
                                </td>
                                <td><a translation-url href="https://accounts.cbd.int/password" target="_new"><strong>accounts.cbd.int/password</strong></a></td>

                            </tr>
                        </table>
                    </div>
                </div>
            </div>         

            <top-requests ng-if="roles.isAbsNationalFocalPoint || roles.isAbsPublishingAuthority || roles.isAbsAdministrator || roles.isAdministrator" filter="workingDocumentLock/lockedOn ne null" title="Your pending requests" top="3" view-all-url="/register/pending-requests"></top-requests>
            
            <div id="SubmitPage">
                <h4 class="visible-xs" style="padding:3px;margin-top:0;border-bottom:1px solid #ddd;">Обзор записей<div class="row bg-white hidden-xs" style="font-size:12px;padding:5x 0;margin:0;"><span class="pull-right"><span class="label label-danger">&nbsp;</span> Запросы</span> <span class="pull-right">&nbsp;&nbsp;<span class="label label-default">&nbsp;</span> Черновики&nbsp;&nbsp;</span> <span class="pull-right"><span class="label label-success">&nbsp;</span> Опубликованные записи</span></div>
                </h4>

                <div class="row hidden-xs" style="padding:0;margin:0 0 10px 0;border-bottom:1px solid #ddd;">
                    <div>
                        <h4 style="padding:0;margin:0;">Обзор записей</h4>
                    </div>

                </div>

                <div id="menuPlaceholder" ng-if="roles.isUser">
                    <div class="row  bg-grey" style="padding:0;margin:0 0 5px 0;">
                            <table class="overview table" style="width:100%;">
                                    <thead></thead>
                                    <tbody>
                                    <tr>
                                        <td style="min-width:250px;" class="bold">&nbsp; Contacts (People and Organizations) <span href="#" class="helpinfoInline fa fa-info-circle color-litegrey" data-toggle="tooltip" data-html="true" data-title="Published contacts (a person or organization) can be referenced in other records. Вместе с тем записи о контактах не могут быть созданы на основе других записей. You will need to have your contacts published before they are available to be included in other records."
                                                data-container="body"></span></td>
                                        <td style="width:7%;font-size: 12px;" class="hidden-xs text-center bold"> <span class="label label-success"></span> Опубликовано</td>
                                        <td style="width:7%;font-size: 12px;" class="hidden-xs text-center bold"> <span class="label label-default"></span> Черновики</div></td>
                                        <td style="width:7%;font-size: 12px;" class="hidden-xs text-center bold"> <span class="label label-danger"></span> Запросы</div></td>
                                    </tr>
                                    </tbody>
                                </table> 
                    </div>

                    <table class="overview table" style="width:100%;">
                            <thead></thead>
                            <tbody>
                            <tr>
                                <td style="width:70px;"> 
                                        <div class="btn-group btn-group-xs" style="width:70px;" role="group" >
                                                <button type="button" class="btn btn-xs btn-default" ng-click="showTopRecords($event,'contact')"><i class="fa fa-chevron-circle-down cursor" ng-class="{'fa-chevron-circle-down':!topRecords['contact'], 'fa-chevron-circle-up':topRecords['contact']}"
                                                        aria-hidden="true"></i><button type="button" class="btn btn-xs btn-default" ng-click="gotoNew($event,'contact')"><i class="fa fa-plus"></i></button>
                                                <button type="button" class="btn btn-xs btn-default" ng-click="gotoList($event,'contact')"><i class="fa fa-list"></i></button>
                                        </div>
                                </td>
                                <td style="min-width:180px!important;"><a translation-url href="#" ng-click="gotoList($event,'contact')" class="color-darkgrey" style="font-weight:500;">Контакт (КОН)</a></td>
                                <td  style="width:7%;" class="text-center"><a translation-url ng-href="/register/CON/status/published" class="label label-success" ng-class="{'bg-litegrey': facets('contact','publish')===0}">{{facets(&apos;contact&apos;,&apos;publish&apos;)}}</a>  </td>

                                <td   style="width:7%;" class="text-center"><a translation-url ng-href="/register/CON/status/drafts" class="label label-default" ng-class="{'bg-litegrey': Math.max(0, facets('contact','draft') - facets('contact','request'))===0}">{{Math.max(0, facets(&apos;contact&apos;,&apos;draft&apos;) - facets(&apos;contact&apos;,&apos;request&apos;))}}</a> </td>

                                <td  style="width:7%;" class="text-center"><a translation-url ng-href="/register/CON/status/requests" class="label label-danger" ng-class="{'bg-litegrey': facets('contact','request')===0}">{{facets(&apos;contact&apos;,&apos;request&apos;)}}</a></div>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                        <div ng-if="topRecords['contact']" style="position: relative;top:-5px;">
                            <top-records schema="contact" top="10" style="padding-top:5px;" show-schema-name="false"></top-records>
                        </div>
                </div>

                <div id="menuPlaceholder" ng-if="isNationalUser">

                    <div class="row  bg-grey" style="padding:0;margin:20px 0 5px 0;">
                        <div class="bold"><span class="color-blue">&nbsp; Национальные записи</span> <span href="#" class="helpinfoInline fa fa-info-circle color-litegrey" data-toggle="tooltip" data-html="true" data-title="Национальные записи содержат информацию, которая как правило требуется представлять в рамках обязательств Стороны по Нагойскому протоколу регулирования доступа к генетическим ресурсам и совместного использования на справедливой и равной основе выгод от их применения. Перед размещением в Механизме посредничества для регулирования ДГРСИВ эти записи должны проверяться публикующим органом по МП-ДГРСИВ."
                                data-container="body"></span></div>
                    </div>

                    <div ng-repeat="schema in nationalSchemas">                    
                        <table class="overview table table-hover" style="width:100%;">
                            <thead></thead>
                            <tbody>
                            <tr>
                                <td style="width:70px;"> 
                                        <div class="btn-group btn-group-xs" style="width:70px;" role="group" >
                                                <button type="button" class="btn btn-xs btn-default" ng-click="showTopRecords($event,schema)"><i class="fa fa-chevron-circle-down cursor" ng-class="{'fa-chevron-circle-down':!topRecords[schema], 'fa-chevron-circle-up':topRecords[schema]}"
                                                        aria-hidden="true"></i><button type="button" class="btn btn-xs btn-default" ng-click="gotoNew($event,schema)"><i class="fa fa-plus"></i></button>
                                                <button type="button" class="btn btn-xs btn-default" ng-click="gotoList($event,schema)"><i class="fa fa-list"></i></button>
                                        </div>
                                </td>
                                <td style="min-width:180px!important;"><a translation-url href="#" ng-click="gotoList($event,schema)" class="color-darkgrey" style="font-weight:500;">{{schema|schemaName}} ({{schema|urlSchemaShortName}})</a></td>
                                <td style="width:7%;" class="text-center"><a translation-url ng-href="/register/{{schema|urlSchemaShortName}}/status/published" class="label label-success" ng-class="{'bg-litegrey': facets(schema,'publish')===0}">{{facets(schema,&apos;publish&apos;)}}</a>  </td>

                                <td style="width:7%;" class="text-center"><a translation-url ng-href="/register/{{schema|urlSchemaShortName}}/status/drafts" class="label label-default" ng-class="{'bg-litegrey': Math.max(0, facets(schema,'draft') - facets(schema,'request'))===0}">{{Math.max(0, facets(schema,&apos;draft&apos;) - facets(schema,&apos;request&apos;))}}</a> </td>

                                <td style="width:7%;" class="text-center"><a translation-url ng-href="/register/{{schema|urlSchemaShortName}}/status/requests" class="label label-danger" ng-class="{'bg-litegrey': facets(schema,'request')===0}">{{facets(schema,&apos;request&apos;)}}</a></div>
                                </td>
                            </tr>
                        </tbody>
                        </table>
                        <div ng-if="topRecords[schema]" style="width:100%">
                            <top-records schema="{{schema}}" top="10" style="padding-top:5px;" show-schema-name="false"></top-records>
                        </div>
                    </div>

                </div>

                <div class="row  bg-grey" style="padding:0;margin:20px 0 5px 0;">
                    <div class="bold"><span class="color-orange">&nbsp; Справочные записи</span> <span href="#" class="helpinfoInline fa fa-info-circle color-litegrey" data-toggle="tooltip" data-html="true" data-title="Справочные записи содержат информацию, которая имеет отношение к Протоколу, но не представляется в рамках обязательств Стороны по Протоколу. Эта информация может размещаться в Механизме посредничества для регулирования ДГРСИВ любым зарегистрированным пользователем, включая представителей правительств, коренных и местных общин, академического сообщества, неправительственных организаций, научно-исследовательских учреждений, делового сообщества и т. д. Перед размещением в Механизме посредничества для регулирования ДГРСИ все справочные записи проверяются Секретариатом." data-container="body"></span></div>
                </div>

                <div ng-repeat="schema in referenceSchemas">                    
                        <table class="overview table table-hover" style="width:100%;">
                            <thead></thead>
                            <tbody>
                            <tr>
                                <td style="width:70px;"> 
                                        <div class="btn-group btn-group-xs" style="width:70px;" role="group" >
                                                <button type="button" class="btn btn-xs btn-default" ng-click="showTopRecords($event,schema)"><i class="fa fa-chevron-circle-down cursor" ng-class="{'fa-chevron-circle-down':!topRecords[schema], 'fa-chevron-circle-up':topRecords[schema]}"
                                                        aria-hidden="true"></i><button type="button" class="btn btn-xs btn-default" ng-click="gotoNew($event,schema)"><i class="fa fa-plus"></i></button>
                                                <button type="button" class="btn btn-xs btn-default" ng-click="gotoList($event,schema)"><i class="fa fa-list"></i></button>
                                        </div>
                                </td>
                                <td style="min-width:180px!important;"><a translation-url href="#" ng-click="gotoList($event,schema)" class="color-darkgrey" style="font-weight:500;">{{schema|schemaName}} ({{schema|urlSchemaShortName}})</a></td>
                                <td style="width:7%;" class="text-center"><a translation-url ng-href="/register/{{schema|urlSchemaShortName}}/status/published" class="label label-success" ng-class="{'bg-litegrey': facets(schema,'publish')===0}">{{facets(schema,&apos;publish&apos;)}}</a>  </td>

                                <td style="width:7%;" class="text-center"><a translation-url ng-href="/register/{{schema|urlSchemaShortName}}/status/drafts" class="label label-default" ng-class="{'bg-litegrey': Math.max(0, facets(schema,'draft') - facets(schema,'request'))===0}">{{Math.max(0, facets(schema,&apos;draft&apos;) - facets(schema,&apos;request&apos;))}}</a> </td>

                                <td style="width:7%;" class="text-center"><a translation-url ng-href="/register/{{schema|urlSchemaShortName}}/status/requests" class="label label-danger" ng-class="{'bg-litegrey': facets(schema,'request')===0}">{{facets(schema,&apos;request&apos;)}}</a></div>
                                </td>
                            </tr>
                        </tbody>
                        </table>
                        <div ng-if="topRecords[schema]" style="width:100%">
                            <top-records schema="{{schema}}" top="10" style="padding-top:5px;" show-schema-name="false"></top-records>
                        </div>
                    </div>

            </div>

        </div>
    </div>
</div><!-- controller -->